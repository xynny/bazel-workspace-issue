def _install_verification(repository_ctx):
  if repository_ctx.os.name == "mac os x":
    gnu_cp = repository_ctx.which("gcp")
    if not gnu_cp:
      fail("""
===================================================================================================
===================================================================================================
===================================================================================================
===================================================================================================

You must have GNU coreutils installed to build Javascript.
Install it with:

brew install coreutils

===================================================================================================
===================================================================================================
===================================================================================================
===================================================================================================
""")

  repository_ctx.file("BUILD", """
filegroup(
  name = "gnu_cp",
  visibility = ["//visibility:public"],
)
""".strip())

install_verification = repository_rule(
  implementation=_install_verification,
)
